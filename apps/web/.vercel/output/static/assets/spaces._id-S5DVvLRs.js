import{j as e,r as k}from"./motion-DC4U2J0c.js";import{C as a,d as n,e as r,I as j,G as x,J as I,a as D,g as f,B as b,t as N,f as o,$ as E,Y as F,F as O}from"./index-C7VtW-_9.js";import{u as R}from"./useMutation-BTpNxzfg.js";import{A as q,a as B}from"./avatar-Cz9D39yF.js";import{D as P,a as U,b as H,f as Q}from"./dropdown-menu-D9BEQKso.js";import{T as J,a as K,b as w,c as u,d as L,e as p,f as V,g as Y,h as g,i as v}from"./tabs-DTpIT6J8.js";import{r as G,t as $,I as W,U as S,o as X,J as Z,s as _,D as A,y as ee,R as se}from"./lucidReact-bXZfAhMw.js";import{e as ae,f as re,g as ie,h as ne,i as le,M as ce,b as te}from"./modal-CMhnshTJ.js";import{u as de}from"./form-DOfUwQ34.js";import{o as oe,e as xe}from"./zod-DoyeK4oN.js";import"./gsap-CH_iu5NA.js";import"./orpc-CKyNAsGy.js";function z(){return e.jsx(a,{children:e.jsx(n,{children:e.jsx(r,{className:"text-center text-muted-foreground text-xl",children:"Comming Soon..."})})})}function me({id:t}){const{data:l}=j(x.spaces.members.get.queryOptions({input:{spaceId:Number(t)}})),{data:i}=j(I),m=R(x.spaces.members.delete.mutationOptions()),h=D(),c=s=>{N.promise(m.mutateAsync({memberId:Number(s)}),{loading:"Removing member...",success:({message:d})=>(h.invalidateQueries({queryKey:x.spaces.members.get.queryKey({input:{spaceId:Number(t)}})}),d),error:"Error removing member"})};return e.jsx(a,{children:e.jsx(f,{className:"grid",children:e.jsxs(J,{children:[e.jsx(K,{children:e.jsxs(w,{className:"hover:bg-transparent",children:[e.jsx(u,{children:"Name"}),e.jsx(u,{children:"Email"}),e.jsx(u,{children:"Role"}),e.jsx(u,{className:"text-right",children:"Balance"})]})}),e.jsx(L,{children:l.map(s=>{var d,C,y,M,T;return e.jsxs(w,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{children:e.jsx(B,{children:(d=s.user)==null?void 0:d.name[0]})}),e.jsx("div",{children:e.jsx("div",{className:"font-medium",children:(C=s.user)==null?void 0:C.name})})]})}),e.jsx(p,{children:(y=s.user)==null?void 0:y.email}),e.jsx(p,{children:s.role}),e.jsx(p,{className:"text-right",children:e.jsxs(P,{children:[e.jsx(U,{asChild:!0,children:e.jsx(b,{size:"icon",variant:"ghost",children:e.jsx(G,{})})}),e.jsx(H,{side:"bottom",align:"end",children:e.jsx(Q,{onClick:()=>c(s.id.toString()),disabled:(i==null?void 0:i.id)!==((M=s.space)==null?void 0:M.ownerId)||((T=s.space)==null?void 0:T.ownerId)===s.userId,children:"Remove"})})]})})]},s.id)})})]})})})}function je({id:t}){const{data:l}=j(x.spaces.members.get.queryOptions({input:{spaceId:Number(t)}}));return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[e.jsx(a,{children:e.jsxs(n,{className:"flex gap-4",children:[e.jsx($,{className:"size-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(r,{children:"Total Members"}),e.jsx(o,{children:l.length})]})]})}),e.jsx(a,{children:e.jsxs(f,{className:"flex gap-4",children:[e.jsx(W,{className:"size-6 text-emerald-500"}),e.jsxs("div",{children:[e.jsx(r,{children:"Admins"}),e.jsx(o,{children:l.filter(i=>i.role==="admin").length})]})]})})]}),e.jsx(me,{id:t})]})}const he=()=>e.jsxs("div",{className:"grid grid-cols-1 gap-2 lg:grid-cols-2",children:[e.jsxs(a,{children:[e.jsx(n,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"size-5 text-emerald-500"}),e.jsx("span",{children:"Current Balances"})]})}),e.jsx(f,{children:e.jsx("div",{className:"grid place-content-center space-y-3",children:e.jsx("p",{className:"text-muted-foreground",children:"comming soon..."})})})]}),e.jsxs(a,{children:[e.jsx(n,{children:e.jsxs(r,{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"size-5 text-blue-500"}),e.jsx("span",{children:"Recent Purchases"})]})}),e.jsx(f,{children:e.jsx("div",{className:"grid place-content-center space-y-3",children:e.jsx("p",{className:"text-muted-foreground",children:"comming soon..."})})})]})]}),Se=function(){const{id:l}=E.useParams(),{data:i}=j(x.spaces.get.one.queryOptions({input:{id:Number(l)}})),{data:m}=j(I),h=R(x.invites.send.mutationOptions()),c=de({defaultValues:{email:""},validators:{onSubmit:oe({email:xe()})},onSubmit:async({value:s})=>{if((m==null?void 0:m.email)===s.email){N.warning("You cannot invite yourself");return}N.promise(h.mutateAsync({spaceId:Number(l),email:s.email}),{loading:"Sending invite...",success:({message:d})=>(c.reset(),d),error:"Error sending invite"})}});return e.jsxs("section",{className:"mx-auto w-full max-w-7xl space-y-4 p-4",children:[e.jsx(a,{children:e.jsxs(n,{className:"flex flex-col justify-between gap-2 sm:flex-row",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex size-8 items-center justify-center rounded-lg bg-primary-100 dark:bg-primary-950",children:e.jsx(S,{className:"size-4 text-primary"})}),e.jsx(r,{className:"text-2xl capitalize",children:i==null?void 0:i.name})]}),e.jsxs(F,{"data-slot":"action",className:"flex items-center gap-4",children:[e.jsxs(b,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(X,{}),"Settings"]}),e.jsxs(ae,{children:[e.jsx(re,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(Z,{}),"Invite"]})}),e.jsxs(ie,{children:[e.jsx(ne,{children:e.jsx(le,{children:"Invite Member"})}),e.jsxs("form",{className:"space-y-4",onSubmit:s=>{s.preventDefault(),c.handleSubmit()},children:[e.jsx(c.AppField,{name:"email",children:s=>e.jsx(s.TextField,{label:"Email"})}),e.jsxs(ce,{children:[e.jsx(te,{asChild:!0,children:e.jsx(b,{variant:"outline",className:"flex-1",children:"Cancel"})}),e.jsx(c.AppForm,{children:e.jsx(c.SubmitButton,{label:"Invite",className:"flex-1",isLoading:h.isPending})})]})]})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(a,{children:e.jsxs(n,{className:"flex gap-4",children:[e.jsx(S,{className:"size-6 shrink-0 text-emerald-500"}),e.jsxs("div",{children:[e.jsx(r,{children:"Members"}),e.jsx(o,{children:"12"})]})]})}),e.jsx(a,{children:e.jsxs(n,{className:"flex gap-4",children:[e.jsx(_,{className:"size-6 shrink-0 text-blue-500"}),e.jsxs("div",{children:[e.jsx(r,{children:"Active Subscriptions"}),e.jsx(o,{children:"12"})]})]})}),e.jsx(a,{children:e.jsxs(n,{className:"flex gap-4",children:[e.jsx(A,{className:"size-6 shrink-0 text-green-500"}),e.jsxs("div",{children:[e.jsx(r,{children:"Monthly Total"}),e.jsx(o,{children:"12"})]})]})}),e.jsx(a,{children:e.jsxs(n,{className:"flex gap-4",children:[e.jsx(ee,{className:"size-6 shrink-0 text-purple-500"}),e.jsxs("div",{children:[e.jsx(r,{children:"Recent Purchases"}),e.jsx(o,{children:"12"})]})]})})]}),e.jsxs(V,{defaultValue:"overview",children:[e.jsxs(Y,{className:"w-full",children:[e.jsx(g,{value:"overview",children:"Overview"}),e.jsx(g,{value:"subscriptions",children:"Subscriptions"}),e.jsx(g,{value:"purchases",children:"Purchases"}),e.jsx(g,{value:"members",children:"Members"})]}),e.jsx(v,{value:"overview",children:e.jsx(he,{})}),e.jsx(v,{value:"subscriptions",children:e.jsx(z,{})}),e.jsx(v,{value:"purchases",children:e.jsx(z,{})}),e.jsx(v,{value:"members",children:e.jsx(k.Suspense,{fallback:e.jsx(O,{className:"h-96 w-full"}),children:e.jsx(je,{id:l})})})]})]})};export{Se as component};
