import{r as i,j as d}from"./motion-DC4U2J0c.js";import{a6 as R,k as b,P as v,a7 as C,M as f,c as p}from"./index-C7VtW-_9.js";var I=R();function j(){return I.useSyncExternalStore(k,()=>!0,()=>!1)}function k(){return()=>{}}var m="Avatar",[y,H]=b(m),[_,S]=y(m),x=i.forwardRef((a,t)=>{const{__scopeAvatar:n,...r}=a,[o,e]=i.useState("idle");return d.jsx(_,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:e,children:d.jsx(v.span,{...r,ref:t})})});x.displayName=m;var L="AvatarImage",N=i.forwardRef((a,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...e}=a,l=S(L,n),s=M(r,e),u=C(c=>{o(c),l.onImageLoadingStatusChange(c)});return f(()=>{s!=="idle"&&u(s)},[s,u]),s==="loaded"?d.jsx(v.img,{...e,ref:t,src:r}):null});N.displayName=L;var E="AvatarFallback",h=i.forwardRef((a,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=a,e=S(E,n),[l,s]=i.useState(r===void 0);return i.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(u)}},[r]),l&&e.imageLoadingStatus!=="loaded"?d.jsx(v.span,{...o,ref:t}):null});h.displayName=E;function A(a,t){return a?t?(a.src!==t&&(a.src=t),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function M(a,{referrerPolicy:t,crossOrigin:n}){const r=j(),o=i.useRef(null),e=r?(o.current||(o.current=new window.Image),o.current):null,[l,s]=i.useState(()=>A(e,a));return f(()=>{s(A(e,a))},[e,a]),f(()=>{const u=w=>()=>{s(w)};if(!e)return;const c=u("loaded"),g=u("error");return e.addEventListener("load",c),e.addEventListener("error",g),t&&(e.referrerPolicy=t),typeof n=="string"&&(e.crossOrigin=n),()=>{e.removeEventListener("load",c),e.removeEventListener("error",g)}},[e,n,t]),l}var F=x,P=h;function $({className:a,...t}){return d.jsx(F,{"data-slot":"avatar",className:p("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...t})}function q({className:a,...t}){return d.jsx(P,{"data-slot":"avatar-fallback",className:p("flex size-full items-center justify-center rounded-full bg-muted",a),...t})}export{$ as A,q as a};
